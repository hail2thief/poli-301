---
title: "Correlation and regression"
citeproc: true
bibliography: ../../static/bib/references.bib
csl: ../../static/bib/chicago-fullnote-bibliography-no-bib.csl
menu: 
  class:
    parent: Class
    weight: 5
type: docs
output:
  blogdown::html_page:
    toc: true
editor_options: 
  chunk_output_type: console
---



## The problem with objects


Most of the time in R, we are taking a data object and doing stuff to it with mutate, group_by, summarise, etc. This alters our data in different ways; to *store* these changes, we need to create a new object. See some examples below: 


```{r, eval=FALSE}
# load the libraries
library(tidyverse)
library(socviz)


# if you don't store what you've done to your data, you can't retrieve it!
gss_cat %>% 
  group_by(year) %>% 
  summarise(ave_tvhours = mean(tvhours, na.rm = TRUE))


# see? error
ggplot(gss_cat, aes(x = year, y = ave_tvhours)) + geom_col()


# you can store as a new OBJECT
tv_time = gss_cat %>% 
  group_by(year) %>% 
  summarise(ave_tvhours = mean(tvhours, na.rm = TRUE))

# or as the original object
gss_cat = gss_cat %>% 
  group_by(year) %>% 
  summarise(ave_tvhours = mean(tvhours, na.rm = TRUE))
# but note this OVERWRITES the original object

# same with mutate
gss_cat %>% 
  mutate(tv_mins = tvhours*60)

# see? error
gss_cat %>% 
  select(tv_mins)

# you can store as new object
gss_new = gss_cat %>% 
  mutate(tv_mins = tvhours*60)

# or overwrite existing (better)
gss_cat = gss_cat %>% 
  mutate(tv_mins = tvhours*60)

```


## Drawing lines


Why draw trend lines? Trend lines give us a good, educated guess as to what the value of a Y variable is given some value of X. 


```{r, warning=F,message=F}
# libraries
library(tidyverse)

# mtcars
ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point() + geom_smooth(method = "lm")
```


### Why not just take an average?


Compare, for instance, against simply taking the average of every wt value. Weakness here is that we only have exact guesses for values of X for which we have data. No exact guess, for example, for a car that weighs exactly 2 tons:


```{r}
# manually
mtcars %>% 
  group_by(wt) %>% 
  summarise(ave_mpg = mean(mpg, na.rm = TRUE)) 

```



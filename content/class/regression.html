---
title: "Correlation and regression"
citeproc: true
bibliography: ../../static/bib/references.bib
csl: ../../static/bib/chicago-fullnote-bibliography-no-bib.csl
menu: 
  class:
    parent: Class
    weight: 5
type: docs
output:
  blogdown::html_page:
    toc: true
editor_options: 
  chunk_output_type: console
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#the-problem-with-objects">The problem with objects</a></li>
<li><a href="#drawing-lines">Drawing lines</a>
<ul>
<li><a href="#why-not-just-take-an-average">Why not just take an average?</a></li>
</ul></li>
</ul>
</div>

<div id="the-problem-with-objects" class="section level2">
<h2>The problem with objects</h2>
<p>Most of the time in R, we are taking a data object and doing stuff to it with mutate, group_by, summarise, etc. This alters our data in different ways; to <em>store</em> these changes, we need to create a new object. See some examples below:</p>
<pre class="r"><code># load the libraries
library(tidyverse)
library(socviz)


# if you don&#39;t store what you&#39;ve done to your data, you can&#39;t retrieve it!
gss_cat %&gt;% 
  group_by(year) %&gt;% 
  summarise(ave_tvhours = mean(tvhours, na.rm = TRUE))


# see? error
ggplot(gss_cat, aes(x = year, y = ave_tvhours)) + geom_col()


# you can store as a new OBJECT
tv_time = gss_cat %&gt;% 
  group_by(year) %&gt;% 
  summarise(ave_tvhours = mean(tvhours, na.rm = TRUE))

# or as the original object
gss_cat = gss_cat %&gt;% 
  group_by(year) %&gt;% 
  summarise(ave_tvhours = mean(tvhours, na.rm = TRUE))
# but note this OVERWRITES the original object

# same with mutate
gss_cat %&gt;% 
  mutate(tv_mins = tvhours*60)

# see? error
gss_cat %&gt;% 
  select(tv_mins)

# you can store as new object
gss_new = gss_cat %&gt;% 
  mutate(tv_mins = tvhours*60)

# or overwrite existing (better)
gss_cat = gss_cat %&gt;% 
  mutate(tv_mins = tvhours*60)</code></pre>
</div>
<div id="drawing-lines" class="section level2">
<h2>Drawing lines</h2>
<p>Why draw trend lines? Trend lines give us a good, educated guess as to what the value of a Y variable is given some value of X.</p>
<pre class="r"><code># libraries
library(tidyverse)

# mtcars
ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point() + geom_smooth(method = &quot;lm&quot;)</code></pre>
<p><img src="/class/regression_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<div id="why-not-just-take-an-average" class="section level3">
<h3>Why not just take an average?</h3>
<p>Compare, for instance, against simply taking the average of every wt value. Weakness here is that we only have exact guesses for values of X for which we have data. No exact guess, for example, for a car that weighs exactly 2 tons:</p>
<pre class="r"><code># manually
mtcars %&gt;% 
  group_by(wt) %&gt;% 
  summarise(ave_mpg = mean(mpg, na.rm = TRUE)) </code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 29 x 2
##       wt ave_mpg
##    &lt;dbl&gt;   &lt;dbl&gt;
##  1  1.51    30.4
##  2  1.62    30.4
##  3  1.84    33.9
##  4  1.94    27.3
##  5  2.14    26  
##  6  2.2     32.4
##  7  2.32    22.8
##  8  2.46    21.5
##  9  2.62    21  
## 10  2.77    19.7
## # â€¦ with 19 more rows</code></pre>
</div>
</div>
